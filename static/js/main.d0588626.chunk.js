(this.webpackJsonpbigcanvas=this.webpackJsonpbigcanvas||[]).push([[0],[,,,,,,,,,,function(t,e,i){t.exports=i(25)},,,,,function(t,e,i){},function(t,e,i){},,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";i.r(e);var o=i(1),n=i.n(o),s=i(6),c=i.n(s),a=(i(15),i(2)),r=i(3),h=i(8),u=i(7),d=i(9),v=(i(16),i(0)),g=i(4),l=function(){function t(e){var i=this;Object(a.a)(this,t),this.width=100,this.height=100,this.lines=2,this.isActived=!1,this.strokeWidth=5,this.fontSize=10,this.init(e);var o=0;this.group.on("mouseup",(function(){var t=new Date;o=t.getTime()})),this.group.on("mousedown",(function(){(new Date).getTime()-o<300?i.active():i.rect.set("strokeWidth",i.strokeWidth)})),this.group.on("mouseup",(function(){i.rect.set("strokeWidth",0)})),this.textbox.on("changed",(function(t){})),this.textbox.on("editing:entered",(function(t){})),this.textbox.on("editing:exited",(function(t){i.unactive()}))}return Object(r.a)(t,[{key:"init",value:function(t){this.canvas=t.canvas;var e={originX:"center",originY:"center",top:t.y,left:t.x,width:this.width,height:this.height},i={lockScalingY:!0,lockScalingX:!0,lockUniScaling:!0,lockRotation:!0};this.rect=new v.fabric.Rect(Object(g.a)({},e,{},i,{fill:"#FFF09A",hasControls:!1,stroke:"#00A2FF",strokeWidth:this.strokeWidth}));var o=v.fabric.util.createClass(v.fabric.Textbox,{});this.textbox=new o("",Object(g.a)({},e,{},i,{width:this.width,top:t.y,fontSize:this.fontSize,textAlign:"center",fill:"#000",hasBorders:!1,breakWords:!0})),this.group=new v.fabric.Group([],Object(g.a)({},i)),this.group.data=this,this.active()}},{key:"active",value:function(){this.isActived||(this.group.removeWithUpdate(this.rect),this.group.removeWithUpdate(this.textbox),this.canvas.remove(this.group),this.canvas.add(this.rect),this.canvas.add(this.textbox),this.canvas.setActiveObject(this.textbox),this.rect.set("strokeWidth",this.strokeWidth),this.textbox.enterEditing(),this.isActived=!0,console.log("active"))}},{key:"unactive",value:function(){this.isActived&&(this.rect.set("strokeWidth",0),this.canvas.remove(this.rect),this.canvas.remove(this.textbox),this.group.addWithUpdate(this.rect),this.group.addWithUpdate(this.textbox),this.canvas.add(this.group),this.isActived=!1,console.log("unactive"))}},{key:"isActived",value:function(){return this.isActived}}]),t}(),f=function t(e){var i=this;Object(a.a)(this,t);var o=e;this.originWidth=1024,this.originHeight=1024,this.backgroundColor="#C6CDD5";var n=new v.fabric.Canvas(o,{width:this.originWidth,height:this.originHeight,backgroundColor:this.backgroundColor});v.fabric.util.addListener(document.body,"keydown",(function(t){if(!t.repeat){var e=t.which||t.keyCode,i=n.getActiveObject();if(i){var o=i.get("type");if(console.log(o),"textbox"===o);else if("group"===o){if(8===e)n.remove(i);else i.data.active()}else"activeSelection"===o&&8===e&&n.getActiveObjects().forEach((function(t){n.remove(t)}))}}})),n.on("mouse:dblclick",(function(t){t.target||(alert(JSON.stringify(t.pointer)),new l({x:t.pointer.x,y:t.pointer.y,canvas:n}))})),n.on({"object:moving":function(t){t.target.opacity=.5,console.log("moving")},"object:modified":function(t){t.target.opacity=1,console.log("modified")}}),n.on("mouse:wheel",(function(t){var e=t.e.deltaY,o=n.getZoom();(o+=e/200)>20&&(o=20),o<.01&&(o=.01),console.log(o),n.setZoom(o),t.e.preventDefault(),t.e.stopPropagation(),n.setWidth(i.originWidth*o),n.setHeight(i.originHeight*o)}))},b=function(t){function e(){return Object(a.a)(this,e),Object(h.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=document.getElementById("c");new f(t)}},{key:"render",value:function(){return n.a.createElement("div",{className:"bcContainer"},n.a.createElement("canvas",{className:"c",id:"c"}))}}]),e}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.d0588626.chunk.js.map